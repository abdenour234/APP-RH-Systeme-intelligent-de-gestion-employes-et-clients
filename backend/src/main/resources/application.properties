# Updated Supabase PostgreSQL Configuration
spring.datasource.url=jdbc:postgresql://13.39.246.141:6543/postgres?ssl=true&sslmode=require&prepareThreshold=0&preparedStatementCacheQueries=0&preparedStatementCacheSizeMiB=0&databaseMetadataCacheFields=0&databaseMetadataCacheFieldsMiB=0&stringtype=unspecified&ApplicationName=SpringBootApp

spring.datasource.username=postgres.gcftmbhqlkqcamiwjoky
spring.datasource.password=Oujda@oujda
spring.jpa.hibernate.ddl-auto=update
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
server.port=8080
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP Configuration - Optimized for Supabase
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.pool-prepared-statements=false
spring.datasource.hikari.max-open-prepared-statements=0
spring.datasource.hikari.cache-prep-stmts=false
spring.datasource.hikari.prep-stmt-cache-size=0
spring.datasource.hikari.prep-stmt-cache-sql-limit=0

# Supabase specific data source properties
spring.datasource.hikari.data-source-properties.cachePrepStmts=false
spring.datasource.hikari.data-source-properties.prepStmtCacheSize=0
spring.datasource.hikari.data-source-properties.prepStmtCacheSqlLimit=0
spring.datasource.hikari.data-source-properties.useServerPrepStmts=false
spring.datasource.hikari.data-source-properties.reWriteBatchedInserts=true
spring.datasource.hikari.data-source-properties.ApplicationName=SpringBootApp

# PostgreSQL/Hibernate specific configurations
spring.jpa.properties.hibernate.jdbc.batch_size=0
spring.jpa.properties.hibernate.order_inserts=false
spring.jpa.properties.hibernate.order_updates=false
spring.jpa.properties.hibernate.batch_versioned_data=false
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

spring.jpa.properties.hibernate.statement_cache.size=64
spring.jpa.properties.hibernate.query.plan_cache_max_size=64
spring.jpa.properties.hibernate.query.plan_parameter_metadata_max_size=64

# Connection validation
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=false
spring.jpa.properties.hibernate.connection.autocommit=true

# Logging configuration
logging.level.root=INFO
logging.level.org.springframework=INFO
logging.level.com.zaxxer.hikari=DEBUG
logging.level.org.postgresql=DEBUG
logging.level.com.example.myapp=INFO
logging.level.org.springframework.cache=INFO
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} %-5level %logger{36} - %msg%n

spring.cache.type=simple

# Additional Supabase optimizations
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=false
spring.jpa.properties.hibernate.connection.handling_mode=delayed_acquisition_and_release_after_transaction